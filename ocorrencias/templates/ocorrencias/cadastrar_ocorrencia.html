{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>🆕 Cadastrar Ocorrência</h2>

    <!-- Formulário com suporte para upload de imagem -->
    <form method="POST" enctype="multipart/form-data" class="mt-3">
        {% csrf_token %}

        <!-- Exibir os campos do formulário com Bootstrap -->
        <div class="mb-3">
            📅 {{ form.data_ocorrencia.label_tag }}
            <input type="date" name="{{ form.data_ocorrencia.name }}" class="form-control" required>
        </div>

        <div class="mb-3">
            ⏰ {{ form.horario.label_tag }}
            <input type="time" name="{{ form.horario.name }}" class="form-control" required>
        </div>

        <div class="mb-3">
            🚨 {{ form.tipo.label_tag }}
            <select name="{{ form.tipo.name }}" class="form-control select2">
                {{ form.tipo }}
            </select>
        </div>

        <div class="mb-3">
            📌 {{ form.status.label_tag }}
            <select name="{{ form.status.name }}" class="form-control select2">
                {{ form.status }}
            </select>
        </div>

        <div class="mb-3">
            📍 {{ form.local.label_tag }}
            <select name="{{ form.local.name }}" class="form-control select2">
                {{ form.local }}
            </select>
        </div>

        <div class="mb-3">
            🏢 {{ form.nome_local.label_tag }}
            {{ form.nome_local }}
        </div>

        <div class="mb-3">
            📝 {{ form.relato.label_tag }}
            {{ form.relato }}
        </div>

        <div class="mb-3">
            👤 {{ form.responsavel.label_tag }}
            <select name="{{ form.responsavel.name }}" class="form-control select2">
                {{ form.responsavel }}
            </select>
        </div>

        <div class="mb-3">
            👥 {{ form.envolvidos.label_tag }}
            {{ form.envolvidos }}
        </div>

        <div class="mb-3">
            ✅ {{ form.acoes_tomadas.label_tag }}
            {{ form.acoes_tomadas }}
        </div>

        <div class="mb-3">
            🕵️ {{ form.supervisor.label_tag }}
            <select name="{{ form.supervisor.name }}" class="form-control select2">
                {{ form.supervisor }}
            </select>
        </div>

        <!-- Upload de Imagem -->
        <div class="mb-3">
            📷 {{ form.imagem.label_tag }}
            {{ form.imagem }}
        </div>

        <button type="submit" class="btn btn-success">💾 Salvar</button>
        <a href="{% url 'listar_ocorrencias' %}" class="btn btn-secondary">❌ Cancelar</a>
    </form>
</div>

<!-- Adicionando Select2 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">

<script>
    $(document).ready(function() {
        $('.select2').select2({
            width: '100%',
            placeholder: "Selecione uma opção...",
            allowClear: true
        });
    });
</script>

{% endblock %}
