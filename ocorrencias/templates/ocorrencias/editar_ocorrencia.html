{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">âœï¸ Editar OcorrÃªncia</h2>

    <!-- Exibir mensagens de sucesso ou erro -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="mt-3 card p-4 shadow-sm">
        {% csrf_token %}

        <!-- Renderiza o formulÃ¡rio corretamente -->
        <div class="mb-3">
            <label for="{{ form.data_ocorrencia.id_for_label }}" class="form-label">ğŸ“… Data da OcorrÃªncia:</label>
            {{ form.data_ocorrencia }}
        </div>

        <div class="mb-3">
            <label for="{{ form.horario.id_for_label }}" class="form-label">â° HorÃ¡rio:</label>
            {{ form.horario }}
        </div>

        <div class="mb-3">
            <label for="{{ form.tipo.id_for_label }}" class="form-label">ğŸ“Œ Tipo:</label>
            {{ form.tipo }}
        </div>

        <div class="mb-3">
            <label for="{{ form.status.id_for_label }}" class="form-label">ğŸ”„ Status:</label>
            {{ form.status }}
        </div>

        <div class="mb-3">
            <label for="{{ form.local.id_for_label }}" class="form-label">ğŸ“ Local:</label>
            {{ form.local }}
        </div>

        <div class="mb-3">
            <label for="{{ form.nome_local.id_for_label }}" class="form-label">ğŸ¢ Nome do Local:</label>
            {{ form.nome_local }}
        </div>

        <div class="mb-3">
            <label for="{{ form.relato.id_for_label }}" class="form-label">ğŸ“ Relato:</label>
            {{ form.relato }}
        </div>

        <div class="mb-3">
            <label for="{{ form.responsavel.id_for_label }}" class="form-label">ğŸ‘¤ ResponsÃ¡vel:</label>
            {{ form.responsavel }}
        </div>

        <div class="mb-3">
            <label for="{{ form.envolvidos.id_for_label }}" class="form-label">ğŸ‘¥ Envolvidos:</label>
            {{ form.envolvidos }}
        </div>

        <div class="mb-3">
            <label for="{{ form.acoes_tomadas.id_for_label }}" class="form-label">âœ… AÃ§Ãµes Tomadas:</label>
            {{ form.acoes_tomadas }}
        </div>

        <div class="mb-3">
            <label for="{{ form.supervisor.id_for_label }}" class="form-label">ğŸ•µï¸ Supervisor:</label>
            {{ form.supervisor }}
        </div>

        <!-- Upload de Imagem -->
        <div class="mb-3">
            <label for="{{ form.imagem.id_for_label }}" class="form-label">ğŸ“· Imagem da OcorrÃªncia:</label>
            {{ form.imagem }}
        </div>

        <!-- Exibir imagem atual se houver -->
        {% if ocorrencia.imagem %}
        <div class="mb-3 text-center">
            <p><strong>ğŸ“‚ Imagem Atual:</strong></p>
            <img src="{{ ocorrencia.imagem.url }}" alt="Imagem da ocorrÃªncia" class="img-thumbnail" style="max-width: 300px;">
        </div>
        {% endif %}

        <!-- BotÃµes de aÃ§Ã£o -->
        <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'listar_ocorrencias' %}" class="btn btn-secondary">ğŸ”™ Cancelar</a>
            <button type="submit" class="btn btn-success">ğŸ’¾ Salvar AlteraÃ§Ãµes</button>
        </div>
    </form>
</div>
{% endblock %}
